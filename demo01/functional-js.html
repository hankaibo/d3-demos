<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>functional-js</title>
  <script src="../build/d3.js"></script>
</head>

<body>
<script>
function SimpleWidget(spec) {
  // 定义私有变量
  let instance = {};
  let headline;
  let description;
  instance.render = function () {
    let div = d3.select('body').append('div');
    div.append('h3').text(headline);
    div.attr('class', 'box')
      .attr('style', 'color:' + spec.color)
      .append('p')
      .text(description);
    return instance;
  };
  instance.headline = function (h) {
    if (!arguments.length) {
      return headline;
    }
    headline = h;
    return instance;
  };
  instance.description = function (d) {
    if (!arguments.length) {
      return description;
    }
    description = d;
    return instance;
  };
  return instance;
}

let widget = SimpleWidget({color: '#6495ed'})
  .headline('Simple Widget') // setter
  .description('This is a simple widget demonstrating functional javascript.');

console.log(widget.headline()); //getter
widget.render();
</script>
</body>

</html>
